from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

from tgbot.database.methods.payment import get_paymentx
from tgbot.database.methods.settings import get_settingsx, update_settingsx
from tgbot.database.methods.user import get_userx


# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ñ–∏–ª—è
def profile_search_finl(user_id):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("üí∞ –ò–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å", callback_data=f"admin_user_balance_set:{user_id}"),
        InlineKeyboardButton("üí∞ –í—ã–¥–∞—Ç—å –±–∞–ª–∞–Ω—Å", callback_data=f"admin_user_balance_add:{user_id}")
    ).add(
        InlineKeyboardButton("üéÅ –ü–æ–∫—É–ø–∫–∏", callback_data=f"admin_user_purchases:{user_id}"),
        InlineKeyboardButton("üíå –û—Ç–ø—Ä–∞–≤–∏—Ç—å –°–ú–°", callback_data=f"admin_user_message:{user_id}")
    ).add(
        InlineKeyboardButton("üîÑ –û–±–Ω–æ–≤–∏—Ç—å", callback_data=f"admin_user_refresh:{user_id}")
    )

    return keyboard


# –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫ –ø—Ä–æ—Ñ–∏–ª—é
def profile_search_return_finl(user_id):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("‚ùå –û—Ç–º–µ–Ω–∏—Ç—å", callback_data=f"admin_user_refresh:{user_id}"),
    )

    return keyboard


# –°–ø–æ—Å–æ–±—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
async def payment_choice_finl():
    keyboard = InlineKeyboardMarkup()
    get_payments = await get_paymentx()

    status_form_kb = InlineKeyboardButton("‚úÖ", callback_data="change_payment:Form:False")
    status_number_kb = InlineKeyboardButton("‚úÖ", callback_data="change_payment:Number:False")
    status_nickname_kb = InlineKeyboardButton("‚úÖ", callback_data="change_payment:Nickname:False")

    if get_payments['way_form'] == "False":
        status_form_kb = InlineKeyboardButton("‚ùå", callback_data="change_payment:Form:True")
    if get_payments['way_number'] == "False":
        status_number_kb = InlineKeyboardButton("‚ùå", callback_data="change_payment:Number:True")
    if get_payments['way_nickname'] == "False":
        status_nickname_kb = InlineKeyboardButton("‚ùå", callback_data="change_payment:Nickname:True")

    keyboard.add(
        InlineKeyboardButton("üìã –ü–æ —Ñ–æ—Ä–º–µ", url="https://vk.cc/bYjKGM"), status_form_kb
    ).row(
        InlineKeyboardButton("üìû –ü–æ –Ω–æ–º–µ—Ä—É", url="https://vk.cc/bYjKEy"), status_number_kb
    ).row(
        InlineKeyboardButton("‚ìÇ –ü–æ –Ω–∏–∫–Ω–µ–π–º—É", url="https://vk.cc/c8s66X"), status_nickname_kb
    )

    return keyboard


# –ö–Ω–æ–ø–∫–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
async def settings_open_finl():
    keyboard = InlineKeyboardMarkup()

    get_settings = await get_settingsx()

    if get_settings['misc_support'].isdigit():
        get_user = await get_userx(user_id=int(get_settings['misc_support']))

        if get_user is not None:
            support_kb = InlineKeyboardButton(f"@{get_user['user_login']} ‚úÖ", callback_data="settings_edit_support")
        else:
            support_kb = InlineKeyboardButton("–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã ‚ùå", callback_data="settings_edit_support")
            await update_settingsx(misc_support="None")
    else:
        support_kb = InlineKeyboardButton("–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã ‚ùå", callback_data="settings_edit_support")

    if "None" == get_settings['misc_faq']:
        faq_kb = InlineKeyboardButton("–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ‚ùå", callback_data="settings_edit_faq")
    else:
        faq_kb = InlineKeyboardButton(f"{get_settings['misc_faq'][:15]}... ‚úÖ", callback_data="settings_edit_faq")

    keyboard.add(
        InlineKeyboardButton("‚Ñπ FAQ", callback_data="..."), faq_kb
    ).add(
        InlineKeyboardButton("‚òé –ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data="..."), support_kb
    )

    return keyboard


# –í—ã–∫–ª—é—á–∞—Ç–µ–ª–∏
async def turn_open_finl():
    keyboard = InlineKeyboardMarkup()

    get_settings = await get_settingsx()

    status_buy_kb = InlineKeyboardButton("–í–∫–ª—é—á–µ–Ω—ã ‚úÖ", callback_data="turn_buy:False")
    status_work_kb = InlineKeyboardButton("–í–∫–ª—é—á–µ–Ω—ã ‚úÖ", callback_data="turn_work:False")
    status_pay_kb = InlineKeyboardButton("–í–∫–ª—é—á–µ–Ω—ã ‚úÖ", callback_data="turn_pay:False")

    if get_settings['status_buy'] == "False":
        status_buy_kb = InlineKeyboardButton("–í—ã–∫–ª—é—á–µ–Ω—ã ‚ùå", callback_data="turn_buy:True")
    if get_settings['status_work'] == "False":
        status_work_kb = InlineKeyboardButton("–í—ã–∫–ª—é—á–µ–Ω—ã ‚ùå", callback_data="turn_work:True")
    if get_settings['status_refill'] == "False":
        status_pay_kb = InlineKeyboardButton("–í—ã–∫–ª—é—á–µ–Ω—ã ‚ùå", callback_data="turn_pay:True")

    keyboard.row(
        InlineKeyboardButton("‚õî –¢–µ—Ö. —Ä–∞–±–æ—Ç—ã", callback_data="..."), status_work_kb
    ).row(
        InlineKeyboardButton("üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏—è", callback_data="..."), status_pay_kb
    ).row(
        InlineKeyboardButton("üéÅ –ü–æ–∫—É–ø–∫–∏", callback_data="..."), status_buy_kb
    )

    return keyboard


# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
def category_edit_open_finl(category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("üè∑ –ò–∑–º. –Ω–∞–∑–≤–∞–Ω–∏–µ", callback_data=f"category_edit_name:{category_id}:{remover}"),
        InlineKeyboardButton("üìÅ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é", callback_data=f"position_create_open:{category_id}"),
    ).add(
        InlineKeyboardButton("‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è ‚Ü©", callback_data=f"catategory_edit_swipe:{remover}"),
        InlineKeyboardButton("‚ùå –£–¥–∞–ª–∏—Ç—å", callback_data=f"category_edit_delete:{category_id}:{remover}")
    )

    return keyboard


# –ö–Ω–æ–ø–∫–∏ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
def category_edit_delete_finl(category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("‚ùå –î–∞, —É–¥–∞–ª–∏—Ç—å", callback_data=f"category_delete:{category_id}:yes:{remover}"),
        InlineKeyboardButton("‚úÖ –ù–µ—Ç, –æ—Ç–º–µ–Ω–∏—Ç—å", callback_data=f"category_delete:{category_id}:not:{remover}")
    )

    return keyboard


# –û—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ
def category_edit_cancel_finl(category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("‚ùå –û—Ç–º–µ–Ω–∏—Ç—å", callback_data=f"category_edit_open:{category_id}:{remover}"),
    )

    return keyboard


# –ö–Ω–æ–ø–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
def position_edit_open_finl(position_id, category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("üè∑ –ò–∑–º. –Ω–∞–∑–≤–∞–Ω–∏–µ", callback_data=f"position_edit_name:{position_id}:{category_id}:"
                                                              f"{remover}"),
        InlineKeyboardButton("üí∞ –ò–∑–º. —Ü–µ–Ω—É", callback_data=f"position_edit_price:{position_id}:{category_id}:{remover}"),
    ).add(
        InlineKeyboardButton("üìú –ò–∑–º. –æ–ø–∏—Å–∞–Ω–∏–µ", callback_data=f"position_edit_description:{position_id}:{category_id}:"
                                                              f"{remover}"),
        InlineKeyboardButton("üì∏ –ò–∑–º. —Ñ–æ—Ç–æ", callback_data=f"position_edit_photo:{position_id}:{category_id}:{remover}"),
    ).add(
        InlineKeyboardButton("üóë –û—á–∏—Å—Ç–∏—Ç—å", callback_data=f"position_edit_clear:{position_id}:{category_id}:{remover}"),
        InlineKeyboardButton("üéÅ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã", callback_data=f"products_add_position_open:{position_id}:"
                                                                f"{category_id}"),
    ).add(
        InlineKeyboardButton("üì• –¢–æ–≤–∞—Ä—ã", callback_data=f"position_edit_items:{position_id}:{category_id}:{remover}"),
        InlineKeyboardButton("‚ùå –£–¥–∞–ª–∏—Ç—å", callback_data=f"position_edit_delete:{position_id}:{category_id}:{remover}"),
    ).add(
        InlineKeyboardButton("‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è ‚Ü©", callback_data=f"position_edit_swipe:{category_id}:{remover}"),
    )

    return keyboard


# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
def position_edit_delete_finl(position_id, category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("‚ùå –î–∞, —É–¥–∞–ª–∏—Ç—å", callback_data=f"position_delete:yes:{position_id}:{category_id}:"
                                                            f"{remover}"),
        InlineKeyboardButton("‚úÖ –ù–µ—Ç, –æ—Ç–º–µ–Ω–∏—Ç—å", callback_data=f"position_delete:not:{position_id}:{category_id}:"
                                                              f"{remover}")
    )

    return keyboard


# –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏ –ø–æ–∑–∏—Ü–∏–∏
def position_edit_clear_finl(position_id, category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("‚ùå –î–∞, –æ—á–∏—Å—Ç–∏—Ç—å", callback_data=f"position_clear:yes:{position_id}:{category_id}:"
                                                             f"{remover}"),
        InlineKeyboardButton("‚úÖ –ù–µ—Ç, –æ—Ç–º–µ–Ω–∏—Ç—å", callback_data=f"position_clear:not:{position_id}:{category_id}:"
                                                              f"{remover}")
    )

    return keyboard


# –û—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ
def position_edit_cancel_finl(position_id, category_id, remover):
    keyboard = InlineKeyboardMarkup(
    ).add(
        InlineKeyboardButton("‚ùå –û—Ç–º–µ–Ω–∏—Ç—å", callback_data=f"position_edit_open:{position_id}:{category_id}:{remover}"),
    )

    return keyboard
